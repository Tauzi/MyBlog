<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Âú®ÂâçÈù¢ÁöÑÂõõÁØáÊñáÁ´†ÔºåÊàë‰ª¨Â∑≤ÁªèÂØπ NIO ÁöÑÊ¶ÇÂøµÂ∑≤ÁªèÊúâ‰∫Ü‰∏ÄÂÆöÁöÑ‰∫ÜËß£„ÄÇÂΩìÁÑ∂ÔºåËÉñÂèã‰πüÂèØËÉΩÂíåÊàë‰∏ÄÊ†∑ÔºåÂ∑≤ÁªèË¢´‰∏ÄÂ†ÜÊ¶ÇÂøµÁÉ¶Ê≠ª‰∫Ü„ÄÇ
ÈÇ£‰πàÊú¨ÊñáÔºåÊàë‰ª¨Êí∏Ëµ∑Ë¢ñÂ≠êÔºåÂ∞±ÊòØÂπ≤‰ª£Á†ÅÔºå‰∏çÁûéÊØîÊØî‰∫Ü„ÄÇ
ÂΩìÁÑ∂Ôºå‰∏ãÈù¢Êõ¥Â§öÁöÑÊòØÊèê‰æõ‰∏Ä‰∏™ NIO Á§∫‰æã„ÄÇÁúüÊ≠£Áîü‰∫ßÁ∫ßÁöÑ NIO ‰ª£Á†ÅÔºåÂª∫ËÆÆËÉñÂèãÈáçÊñ∞ÂÜôÔºåÊàñËÄÖÁõ¥Êé•‰ΩøÁî® Netty „ÄÇ
‰ª£Á†Å‰ªìÂ∫ìÂú®¬†example/yunai/nio¬†ÁõÆÂΩï‰∏ã„ÄÇ‰∏ÄÂÖ± 3 ‰∏™Á±ªÔºö
NioServer ÔºöNIO ÊúçÂä°Á´Ø„ÄÇ
NioClient ÔºöNIO ÂÆ¢Êà∑Á´Ø„ÄÇ
CodecUtil ÔºöÊ∂àÊÅØÁºñËß£Á†ÅÂ∑•ÂÖ∑Á±ª„ÄÇ
2. ÊúçÂä°Á´Ø 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 1: public class NioServer { 2: 3: private ServerSocketChannel serverSocketChannel; 4: private Selector selector; 5: 6: public NioServer() throws IOException { 7: // ÊâìÂºÄ Server Socket Channel 8: serverSocketChannel = ServerSocketChannel.'>
<title>nettyÊ∫êÁ†ÅÂàÜÊûê‰∫î</title>

<link rel='canonical' href='https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%94/'>

<link rel="stylesheet" href="/myblog/scss/style.min.50c1fc6533b62d77f594233c8f3413de02946f2ffe11e85728071f2bc3aae8e2.css"><meta property='og:title' content='nettyÊ∫êÁ†ÅÂàÜÊûê‰∫î'>
<meta property='og:description' content='Âú®ÂâçÈù¢ÁöÑÂõõÁØáÊñáÁ´†ÔºåÊàë‰ª¨Â∑≤ÁªèÂØπ NIO ÁöÑÊ¶ÇÂøµÂ∑≤ÁªèÊúâ‰∫Ü‰∏ÄÂÆöÁöÑ‰∫ÜËß£„ÄÇÂΩìÁÑ∂ÔºåËÉñÂèã‰πüÂèØËÉΩÂíåÊàë‰∏ÄÊ†∑ÔºåÂ∑≤ÁªèË¢´‰∏ÄÂ†ÜÊ¶ÇÂøµÁÉ¶Ê≠ª‰∫Ü„ÄÇ
ÈÇ£‰πàÊú¨ÊñáÔºåÊàë‰ª¨Êí∏Ëµ∑Ë¢ñÂ≠êÔºåÂ∞±ÊòØÂπ≤‰ª£Á†ÅÔºå‰∏çÁûéÊØîÊØî‰∫Ü„ÄÇ
ÂΩìÁÑ∂Ôºå‰∏ãÈù¢Êõ¥Â§öÁöÑÊòØÊèê‰æõ‰∏Ä‰∏™ NIO Á§∫‰æã„ÄÇÁúüÊ≠£Áîü‰∫ßÁ∫ßÁöÑ NIO ‰ª£Á†ÅÔºåÂª∫ËÆÆËÉñÂèãÈáçÊñ∞ÂÜôÔºåÊàñËÄÖÁõ¥Êé•‰ΩøÁî® Netty „ÄÇ
‰ª£Á†Å‰ªìÂ∫ìÂú®¬†example/yunai/nio¬†ÁõÆÂΩï‰∏ã„ÄÇ‰∏ÄÂÖ± 3 ‰∏™Á±ªÔºö
NioServer ÔºöNIO ÊúçÂä°Á´Ø„ÄÇ
NioClient ÔºöNIO ÂÆ¢Êà∑Á´Ø„ÄÇ
CodecUtil ÔºöÊ∂àÊÅØÁºñËß£Á†ÅÂ∑•ÂÖ∑Á±ª„ÄÇ
2. ÊúçÂä°Á´Ø 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 1: public class NioServer { 2: 3: private ServerSocketChannel serverSocketChannel; 4: private Selector selector; 5: 6: public NioServer() throws IOException { 7: // ÊâìÂºÄ Server Socket Channel 8: serverSocketChannel = ServerSocketChannel.'>
<meta property='og:url' content='https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%94/'>
<meta property='og:site_name' content='TauZZ&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2023-05-04T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-05-04T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="nettyÊ∫êÁ†ÅÂàÜÊûê‰∫î">
<meta name="twitter:description" content="Âú®ÂâçÈù¢ÁöÑÂõõÁØáÊñáÁ´†ÔºåÊàë‰ª¨Â∑≤ÁªèÂØπ NIO ÁöÑÊ¶ÇÂøµÂ∑≤ÁªèÊúâ‰∫Ü‰∏ÄÂÆöÁöÑ‰∫ÜËß£„ÄÇÂΩìÁÑ∂ÔºåËÉñÂèã‰πüÂèØËÉΩÂíåÊàë‰∏ÄÊ†∑ÔºåÂ∑≤ÁªèË¢´‰∏ÄÂ†ÜÊ¶ÇÂøµÁÉ¶Ê≠ª‰∫Ü„ÄÇ
ÈÇ£‰πàÊú¨ÊñáÔºåÊàë‰ª¨Êí∏Ëµ∑Ë¢ñÂ≠êÔºåÂ∞±ÊòØÂπ≤‰ª£Á†ÅÔºå‰∏çÁûéÊØîÊØî‰∫Ü„ÄÇ
ÂΩìÁÑ∂Ôºå‰∏ãÈù¢Êõ¥Â§öÁöÑÊòØÊèê‰æõ‰∏Ä‰∏™ NIO Á§∫‰æã„ÄÇÁúüÊ≠£Áîü‰∫ßÁ∫ßÁöÑ NIO ‰ª£Á†ÅÔºåÂª∫ËÆÆËÉñÂèãÈáçÊñ∞ÂÜôÔºåÊàñËÄÖÁõ¥Êé•‰ΩøÁî® Netty „ÄÇ
‰ª£Á†Å‰ªìÂ∫ìÂú®¬†example/yunai/nio¬†ÁõÆÂΩï‰∏ã„ÄÇ‰∏ÄÂÖ± 3 ‰∏™Á±ªÔºö
NioServer ÔºöNIO ÊúçÂä°Á´Ø„ÄÇ
NioClient ÔºöNIO ÂÆ¢Êà∑Á´Ø„ÄÇ
CodecUtil ÔºöÊ∂àÊÅØÁºñËß£Á†ÅÂ∑•ÂÖ∑Á±ª„ÄÇ
2. ÊúçÂä°Á´Ø 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 1: public class NioServer { 2: 3: private ServerSocketChannel serverSocketChannel; 4: private Selector selector; 5: 6: public NioServer() throws IOException { 7: // ÊâìÂºÄ Server Socket Channel 8: serverSocketChannel = ServerSocketChannel.">
    <link rel="shortcut icon" href="img/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "light");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/myblog/">
                
                    
                    
                    
                        
                        <img src="/myblog/img/avatar_hu41e9bf84b16d248cd89556079ae4f725_243458_300x0_resize_box_3.png" width="300"
                            height="442" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/myblog">TauZZ&#39;s Blog</a></h1>
            <h2 class="site-description">Âä†Ê≤πÂä™Âäõ.‚úçÔ∏è</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://img.picgo.net/2023/05/09/3b2ebde1c8640d69530516428a740b82ea5623263a52eda.jpeg'
                        target="_blank"
                        title="Dreamq0p"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1683196971239" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2753" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M1024 624.6c0-149.9-142.3-271.8-317.2-271.8s-317.2 122-317.2 271.8c0 149.9 142.3 271.8 317.2 271.8 30.4 0 60.5-3.7 89.4-10.9 7.9 1.1 30.2 13 43.7 20.2 29.4 15.6 49.6 25.8 65.9 25.8 5.2 0 9.9-1 14.4-3.2 24.9-12.1 15-43.1 5.5-73.1-2.5-8-6.5-20.4-7.8-27.7C985.5 776 1024 702.4 1024 624.6z m-137.5 173c-19.4 14.1-11.1 40.2-1.5 70.5 1.3 4.2 3 9.5 4.5 14.7-9.7-4.4-21.1-10.5-29.4-14.9-29.3-15.6-48.5-25.3-64.3-25.3-3 0-5.8 0.3-8.6 1.1-25.9 6.6-52.9 10-80.3 10-151.3 0-274.3-102.7-274.3-229s123.1-229 274.3-229 274.3 102.7 274.3 229c-0.1 66.3-34.6 129.3-94.7 172.9z" p-id="2754" fill="#bfbfbf"></path><path d="M379.1 621.5c0-150.7 146.6-273.7 326.7-274.1 6.9 0 13.4-3.4 17.4-9 4-5.7 5-12.9 2.8-19.4-22.4-64.5-69.6-122.4-132.7-163-64.6-41.5-141.5-63.5-222.6-63.5C166.3 92.5 0 234.8 0 409.7c0 91.4 45.7 177.7 125.5 238-1.2 8.5-6.4 25-9.7 35.5-11.2 35.4-21.8 68.9 4.5 81.7 4.8 2.3 9.8 3.4 15.4 3.4 18.3 0 41.7-11.8 76-30 16.8-8.9 44.7-23.7 53.7-24.3 34.1 8.6 69.5 13 105.4 13h1.3c6.9 0 13.5-3.4 17.5-9 4-5.7 5-12.9 2.8-19.5-8.8-25.2-13.3-51-13.3-77z m-42.8 0c0 20.7 2.4 41.3 7 61.5-23.2-1.6-46.1-5.3-68.3-11-19.4-5-44.3 7.5-83.4 28.3-12.1 6.4-29.7 15.8-42.5 21 2.1-8.3 5.3-18.2 7.5-25.3 10.9-34.4 20.3-64-0.4-79-72-52.2-113.3-127.8-113.3-207.3 0-151.3 147.1-274.3 327.9-274.3 133.2 0 253.5 68.8 303.4 170.4-189 14.1-337.9 150.5-337.9 315.7z" p-id="2755" fill="#bfbfbf"></path><path d="M249.9 305.3m-42.9 0a42.9 42.9 0 1 0 85.8 0 42.9 42.9 0 1 0-85.8 0Z" p-id="2756" fill="#bfbfbf"></path><path d="M493.9 305.3m-42.9 0a42.9 42.9 0 1 0 85.8 0 42.9 42.9 0 1 0-85.8 0Z" p-id="2757" fill="#bfbfbf"></path><path d="M614.9 548.2m-34.3 0a34.3 34.3 0 1 0 68.6 0 34.3 34.3 0 1 0-68.6 0Z" p-id="2758" fill="#bfbfbf"></path><path d="M806.7 548.2m-34.3 0a34.3 34.3 0 1 0 68.6 0 34.3 34.3 0 1 0-68.6 0Z" p-id="2759" fill="#bfbfbf"></path></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/Tauzi'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/myblog/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/myblog/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/myblog/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/myblog/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/myblog/%E5%8F%8B%E9%93%BE/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÂèãÈìæ</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#httpsvipiocodercnnettynio-5-demo2-1-e69e84e980a0e696b9e6b395-21-ÊûÑÈÄ†ÊñπÊ≥ï21-ÊûÑÈÄ†ÊñπÊ≥ï"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-1-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95" title="2.1 ÊûÑÈÄ†ÊñπÊ≥ï"></a>2.1 ÊûÑÈÄ†ÊñπÊ≥ï</a></li>
    <li><a href="#httpsvipiocodercnnettynio-5-demo2-2-handlekeys-22-handlekeys22-handlekeys"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-handleKeys" title="2.2 handleKeys"></a>2.2 handleKeys</a>
      <ol>
        <li><a href="#httpsvipiocodercnnettynio-5-demo2-2-1-handlekey-221-handlekey221-handlekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-1-handleKey" title="2.2.1 handleKey"></a>2.2.1 handleKey</a></li>
        <li><a href="#httpsvipiocodercnnettynio-5-demo2-2-2-handleacceptablekey-222-handleacceptablekey222-handleacceptablekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-2-handleAcceptableKey" title="2.2.2 handleAcceptableKey"></a>2.2.2 handleAcceptableKey</a></li>
        <li><a href="#httpsvipiocodercnnettynio-5-demo2-2-3-handlereadablekey-223-handlereadablekey223-handlereadablekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-3-handleReadableKey" title="2.2.3 handleReadableKey"></a>2.2.3 handleReadableKey</a></li>
        <li><a href="#httpsvipiocodercnnettynio-5-demo2-2-4-handlewritablekey-224-handlewritablekey224-handlewritablekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-4-handleWritableKey" title="2.2.4 handleWritableKey"></a>2.2.4 handleWritableKey</a></li>
      </ol>
    </li>
    <li><a href="#httpsvipiocodercnnettynio-5-demo2-3-main-23-main23-main"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-3-main" title="2.3 main"></a>2.3 main</a></li>
  </ol>

  <ol>
    <li><a href="#httpsvipiocodercnnettynio-5-demo3-1-e69e84e980a0e696b9e6b395-31-ÊûÑÈÄ†ÊñπÊ≥ï31-ÊûÑÈÄ†ÊñπÊ≥ï"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-1-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95" title="3.1 ÊûÑÈÄ†ÊñπÊ≥ï"></a>3.1 ÊûÑÈÄ†ÊñπÊ≥ï</a></li>
    <li><a href="#httpsvipiocodercnnettynio-5-demo3-2-handlekeys-32-handlekeys32-handlekeys"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-2-handleKeys" title="3.2 handleKeys"></a>3.2 handleKeys</a>
      <ol>
        <li><a href="#httpsvipiocodercnnettynio-5-demo3-2-1-handlekey-321-handlekey321-handlekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-2-1-handleKey" title="3.2.1 handleKey"></a>3.2.1 handleKey</a></li>
        <li><a href="#httpsvipiocodercnnettynio-5-demo3-3-2-handleconnectablekey-332-handleconnectablekey332-handleconnectablekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-2-handleConnectableKey" title="3.3.2 handleConnectableKey"></a>3.3.2 handleConnectableKey</a></li>
        <li><a href="#httpsvipiocodercnnettynio-5-demo3-3-3-handlereadablekey-333-handlereadablekey333-handlereadablekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-3-handleReadableKey" title="3.3.3 handleReadableKey"></a>3.3.3 handleReadableKey</a></li>
        <li><a href="#httpsvipiocodercnnettynio-5-demo3-3-4-handlewritablekey-334-handlewritablekey334-handlewritablekey"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-4-handleWritableKey" title="3.3.4 handleWritableKey"></a>3.3.4 handleWritableKey</a></li>
      </ol>
    </li>
    <li><a href="#httpsvipiocodercnnettynio-5-demo3-3-send-33-send33-send"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-send" title="3.3 send"></a>3.3 send</a></li>
    <li><a href="#httpsvipiocodercnnettynio-5-demo3-4-main-34-main34-main"><a href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-4-main" title="3.4 main"></a>3.4 main</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/myblog/categories/netty/" >
                Netty
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%94/">nettyÊ∫êÁ†ÅÂàÜÊûê‰∫î</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 04, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 11 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>Âú®ÂâçÈù¢ÁöÑÂõõÁØáÊñáÁ´†ÔºåÊàë‰ª¨Â∑≤ÁªèÂØπ NIO ÁöÑÊ¶ÇÂøµÂ∑≤ÁªèÊúâ‰∫Ü‰∏ÄÂÆöÁöÑ‰∫ÜËß£„ÄÇÂΩìÁÑ∂ÔºåËÉñÂèã‰πüÂèØËÉΩÂíåÊàë‰∏ÄÊ†∑ÔºåÂ∑≤ÁªèË¢´‰∏ÄÂ†ÜÊ¶ÇÂøµÁÉ¶Ê≠ª‰∫Ü„ÄÇ</p>
<p>ÈÇ£‰πàÊú¨ÊñáÔºåÊàë‰ª¨Êí∏Ëµ∑Ë¢ñÂ≠êÔºåÂ∞±ÊòØÂπ≤‰ª£Á†ÅÔºå‰∏çÁûéÊØîÊØî‰∫Ü„ÄÇ</p>
<p>ÂΩìÁÑ∂Ôºå‰∏ãÈù¢Êõ¥Â§öÁöÑÊòØÊèê‰æõ‰∏Ä‰∏™ NIO Á§∫‰æã„ÄÇÁúüÊ≠£Áîü‰∫ßÁ∫ßÁöÑ NIO ‰ª£Á†ÅÔºåÂª∫ËÆÆËÉñÂèãÈáçÊñ∞ÂÜôÔºåÊàñËÄÖÁõ¥Êé•‰ΩøÁî® Netty „ÄÇ</p>
<p>‰ª£Á†Å‰ªìÂ∫ìÂú®¬†<a class="link" href="https://github.com/YunaiV/netty/tree/f7016330f1483021ef1c38e0923e1c8b7cef0d10/example/src/main/java/io/netty/example/yunai/nio"  target="_blank" rel="noopener"
    >example/yunai/nio</a>¬†ÁõÆÂΩï‰∏ã„ÄÇ‰∏ÄÂÖ± 3 ‰∏™Á±ªÔºö</p>
<ul>
<li>
<p>NioServer ÔºöNIO ÊúçÂä°Á´Ø„ÄÇ</p>
</li>
<li>
<p>NioClient ÔºöNIO ÂÆ¢Êà∑Á´Ø„ÄÇ</p>
</li>
<li>
<p>CodecUtil ÔºöÊ∂àÊÅØÁºñËß£Á†ÅÂ∑•ÂÖ∑Á±ª„ÄÇ</p>
</li>
</ul>
<h1 id="httpsvipiocodercnnettynio-5-demo2-e69c8de58aa1e7abaf-2-ÊúçÂä°Á´Ø2-ÊúçÂä°Á´Ø"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-%E6%9C%8D%E5%8A%A1%E7%AB%AF"  title="2. ÊúçÂä°Á´Ø"
     target="_blank" rel="noopener"
    ></a>2. ÊúçÂä°Á´Ø</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> 1: public class NioServer {  
</span></span><span class="line"><span class="cl"> 2:   
</span></span><span class="line"><span class="cl"> 3: ¬† ¬† private ServerSocketChannel serverSocketChannel;  
</span></span><span class="line"><span class="cl"> 4: ¬† ¬† private Selector selector;  
</span></span><span class="line"><span class="cl"> 5:   
</span></span><span class="line"><span class="cl"> 6: ¬† ¬† public NioServer() throws IOException {  
</span></span><span class="line"><span class="cl"> 7: ¬† ¬† ¬† ¬† // ÊâìÂºÄ Server Socket Channel  
</span></span><span class="line"><span class="cl"> 8: ¬† ¬† ¬† ¬† serverSocketChannel = ServerSocketChannel.open();  
</span></span><span class="line"><span class="cl"> 9: ¬† ¬† ¬† ¬† // ÈÖçÁΩÆ‰∏∫ÈùûÈòªÂ°û  
</span></span><span class="line"><span class="cl"> 10: ¬† ¬† ¬† ¬† serverSocketChannel.configureBlocking(false);  
</span></span><span class="line"><span class="cl"> 11: ¬† ¬† ¬† ¬† // ÁªëÂÆö Server port  
</span></span><span class="line"><span class="cl"> 12: ¬† ¬† ¬† ¬† serverSocketChannel.socket().bind(new InetSocketAddress(8080));  
</span></span><span class="line"><span class="cl"> 13: ¬† ¬† ¬† ¬† // ÂàõÂª∫ Selector  
</span></span><span class="line"><span class="cl"> 14: ¬† ¬† ¬† ¬† selector = Selector.open();  
</span></span><span class="line"><span class="cl"> 15: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Server Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl"> 16: ¬† ¬† ¬† ¬† serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);  
</span></span><span class="line"><span class="cl"> 17: ¬† ¬† ¬† ¬† System.out.println(&#34;Server ÂêØÂä®ÂÆåÊàê&#34;);  
</span></span><span class="line"><span class="cl"> 18:   
</span></span><span class="line"><span class="cl"> 19: ¬† ¬† ¬† ¬† handleKeys();  
</span></span><span class="line"><span class="cl"> 20: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 21:   
</span></span><span class="line"><span class="cl"> 22: ¬† ¬† private void handleKeys() throws IOException {  
</span></span><span class="line"><span class="cl"> 23: ¬† ¬† ¬† ¬† while (true) {  
</span></span><span class="line"><span class="cl"> 24: ¬† ¬† ¬† ¬† ¬† ¬† // ÈÄöËøá Selector ÈÄâÊã© Channel  
</span></span><span class="line"><span class="cl"> 25: ¬† ¬† ¬† ¬† ¬† ¬† int selectNums = selector.select(30 \* 1000L);  
</span></span><span class="line"><span class="cl"> 26: ¬† ¬† ¬† ¬† ¬† ¬† if (selectNums == 0) {  
</span></span><span class="line"><span class="cl"> 27: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† continue;  
</span></span><span class="line"><span class="cl"> 28: ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 29: ¬† ¬† ¬† ¬† ¬† ¬† System.out.println(&#34;ÈÄâÊã© Channel Êï∞ÈáèÔºö&#34; \+ selectNums);  
</span></span><span class="line"><span class="cl"> 30:   
</span></span><span class="line"><span class="cl"> 31: ¬† ¬† ¬† ¬† ¬† ¬† // ÈÅçÂéÜÂèØÈÄâÊã©ÁöÑ Channel ÁöÑ SelectionKey ÈõÜÂêà  
</span></span><span class="line"><span class="cl"> 32: ¬† ¬† ¬† ¬† ¬† ¬† Iterator&lt;SelectionKey&gt; iterator = selector.selectedKeys().iterator();  
</span></span><span class="line"><span class="cl"> 33: ¬† ¬† ¬† ¬† ¬† ¬† while (iterator.hasNext()) {  
</span></span><span class="line"><span class="cl"> 34: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† SelectionKey key = iterator.next();  
</span></span><span class="line"><span class="cl"> 35: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† iterator.remove(); // ÁßªÈô§‰∏ãÈù¢Ë¶ÅÂ§ÑÁêÜÁöÑ SelectionKey  
</span></span><span class="line"><span class="cl"> 36: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (!key.isValid()) { // ÂøΩÁï•Êó†ÊïàÁöÑ SelectionKey  
</span></span><span class="line"><span class="cl"> 37: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† continue;  
</span></span><span class="line"><span class="cl"> 38: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 39:   
</span></span><span class="line"><span class="cl"> 40: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† handleKey(key);  
</span></span><span class="line"><span class="cl"> 41: ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 42: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 43: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 44:   
</span></span><span class="line"><span class="cl"> 45: ¬† ¬† private void handleKey(SelectionKey key) throws IOException {  
</span></span><span class="line"><span class="cl"> 46: ¬† ¬† ¬† ¬† // Êé•ÂèóËøûÊé•Â∞±Áª™  
</span></span><span class="line"><span class="cl"> 47: ¬† ¬† ¬† ¬† if (key.isAcceptable()) {  
</span></span><span class="line"><span class="cl"> 48: ¬† ¬† ¬† ¬† ¬† ¬† handleAcceptableKey(key);  
</span></span><span class="line"><span class="cl"> 49: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 50: ¬† ¬† ¬† ¬† // ËØªÂ∞±Áª™  
</span></span><span class="line"><span class="cl"> 51: ¬† ¬† ¬† ¬† if (key.isReadable()) {  
</span></span><span class="line"><span class="cl"> 52: ¬† ¬† ¬† ¬† ¬† ¬† handleReadableKey(key);  
</span></span><span class="line"><span class="cl"> 53: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 54: ¬† ¬† ¬† ¬† // ÂÜôÂ∞±Áª™  
</span></span><span class="line"><span class="cl"> 55: ¬† ¬† ¬† ¬† if (key.isWritable()) {  
</span></span><span class="line"><span class="cl"> 56: ¬† ¬† ¬† ¬† ¬† ¬† handleWritableKey(key);  
</span></span><span class="line"><span class="cl"> 57: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 58: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 59:   
</span></span><span class="line"><span class="cl"> 60: ¬† ¬† private void handleAcceptableKey(SelectionKey key) throws IOException {  
</span></span><span class="line"><span class="cl"> 61: ¬† ¬† ¬† ¬† // Êé•Âèó Client Socket Channel  
</span></span><span class="line"><span class="cl"> 62: ¬† ¬† ¬† ¬† SocketChannel clientSocketChannel = ((ServerSocketChannel) key.channel()).accept();  
</span></span><span class="line"><span class="cl"> 63: ¬† ¬† ¬† ¬† // ÈÖçÁΩÆ‰∏∫ÈùûÈòªÂ°û  
</span></span><span class="line"><span class="cl"> 64: ¬† ¬† ¬† ¬† clientSocketChannel.configureBlocking(false);  
</span></span><span class="line"><span class="cl"> 65: ¬† ¬† ¬† ¬† // log  
</span></span><span class="line"><span class="cl"> 66: ¬† ¬† ¬† ¬† System.out.println(&#34;Êé•ÂèóÊñ∞ÁöÑ Channel&#34;);  
</span></span><span class="line"><span class="cl"> 67: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Client Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl"> 68: ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_READ, new ArrayList&lt;String&gt;());  
</span></span><span class="line"><span class="cl"> 69: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 70:   
</span></span><span class="line"><span class="cl"> 71: ¬† ¬† private void handleReadableKey(SelectionKey key) throws IOException {  
</span></span><span class="line"><span class="cl"> 72: ¬† ¬† ¬† ¬† // Client Socket Channel  
</span></span><span class="line"><span class="cl"> 73: ¬† ¬† ¬† ¬† SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
</span></span><span class="line"><span class="cl"> 74: ¬† ¬† ¬† ¬† // ËØªÂèñÊï∞ÊçÆ  
</span></span><span class="line"><span class="cl"> 75: ¬† ¬† ¬† ¬† ByteBuffer readBuffer = CodecUtil.read(clientSocketChannel);  
</span></span><span class="line"><span class="cl"> 76: ¬† ¬† ¬† ¬† // Â§ÑÁêÜËøûÊé•Â∑≤ÁªèÊñ≠ÂºÄÁöÑÊÉÖÂÜµ  
</span></span><span class="line"><span class="cl"> 77: ¬† ¬† ¬† ¬† if (readBuffer == null) {  
</span></span><span class="line"><span class="cl"> 78: ¬† ¬† ¬† ¬† ¬† ¬† System.out.println(&#34;Êñ≠ÂºÄ Channel&#34;);  
</span></span><span class="line"><span class="cl"> 79: ¬† ¬† ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, 0);  
</span></span><span class="line"><span class="cl"> 80: ¬† ¬† ¬† ¬† ¬† ¬† return;  
</span></span><span class="line"><span class="cl"> 81: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 82: ¬† ¬† ¬† ¬† // ÊâìÂç∞Êï∞ÊçÆ  
</span></span><span class="line"><span class="cl"> 83: ¬† ¬† ¬† ¬† if (readBuffer.position() &gt; 0) {  
</span></span><span class="line"><span class="cl"> 84: ¬† ¬† ¬† ¬† ¬† ¬† String content = CodecUtil.newString(readBuffer);  
</span></span><span class="line"><span class="cl"> 85: ¬† ¬† ¬† ¬† ¬† ¬† System.out.println(&#34;ËØªÂèñÊï∞ÊçÆÔºö&#34; \+ content);  
</span></span><span class="line"><span class="cl"> 86:   
</span></span><span class="line"><span class="cl"> 87: ¬† ¬† ¬† ¬† ¬† ¬† // Ê∑ªÂä†Âà∞ÂìçÂ∫îÈòüÂàó  
</span></span><span class="line"><span class="cl"> 88: ¬† ¬† ¬† ¬† ¬† ¬† List&lt;String&gt; responseQueue = (ArrayList&lt;String&gt;) key.attachment();  
</span></span><span class="line"><span class="cl"> 89: ¬† ¬† ¬† ¬† ¬† ¬† responseQueue.add(&#34;ÂìçÂ∫îÔºö&#34; \+ content);  
</span></span><span class="line"><span class="cl"> 90: ¬† ¬† ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Client Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl"> 91: ¬† ¬† ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_WRITE, key.attachment());  
</span></span><span class="line"><span class="cl"> 92: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 93: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 94:   
</span></span><span class="line"><span class="cl"> 95: ¬† ¬† @SuppressWarnings(&#34;Duplicates&#34;)  
</span></span><span class="line"><span class="cl"> 96: ¬† ¬† private void handleWritableKey(SelectionKey key) throws ClosedChannelException {  
</span></span><span class="line"><span class="cl"> 97: ¬† ¬† ¬† ¬† // Client Socket Channel  
</span></span><span class="line"><span class="cl"> 98: ¬† ¬† ¬† ¬† SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
</span></span><span class="line"><span class="cl"> 99:   
</span></span><span class="line"><span class="cl">100: ¬† ¬† ¬† ¬† // ÈÅçÂéÜÂìçÂ∫îÈòüÂàó  
</span></span><span class="line"><span class="cl">101: ¬† ¬† ¬† ¬† List&lt;String&gt; responseQueue = (ArrayList&lt;String&gt;) key.attachment();  
</span></span><span class="line"><span class="cl">102: ¬† ¬† ¬† ¬† for (String content : responseQueue) {  
</span></span><span class="line"><span class="cl">103: ¬† ¬† ¬† ¬† ¬† ¬† // ÊâìÂç∞Êï∞ÊçÆ  
</span></span><span class="line"><span class="cl">104: ¬† ¬† ¬† ¬† ¬† ¬† System.out.println(&#34;ÂÜôÂÖ•Êï∞ÊçÆÔºö&#34; \+ content);  
</span></span><span class="line"><span class="cl">105: ¬† ¬† ¬† ¬† ¬† ¬† // ËøîÂõû  
</span></span><span class="line"><span class="cl">106: ¬† ¬† ¬† ¬† ¬† ¬† CodecUtil.write(clientSocketChannel, content);  
</span></span><span class="line"><span class="cl">107: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl">108: ¬† ¬† ¬† ¬† responseQueue.clear();  
</span></span><span class="line"><span class="cl">109:   
</span></span><span class="line"><span class="cl">110: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Client Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl">111: ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_READ, responseQueue);  
</span></span><span class="line"><span class="cl">112: ¬† ¬† }  
</span></span><span class="line"><span class="cl">113:   
</span></span><span class="line"><span class="cl">114: ¬† ¬† public static void main(String\[\] args) throws IOException {  
</span></span><span class="line"><span class="cl">115: ¬† ¬† ¬† ¬† NioServer server = new NioServer();  
</span></span><span class="line"><span class="cl">116: ¬† ¬† }  
</span></span><span class="line"><span class="cl">117:   
</span></span><span class="line"><span class="cl">118: }  
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êï¥Âùó‰ª£Á†ÅÊàë‰ª¨ÂèØ‰ª•ÂàÜÊàê 3 ÈÉ®ÂàÜÔºö</p>
<ul>
<li>
<p>ÊûÑÈÄ†ÊñπÊ≥ïÔºöÂàùÂßãÂåñ NIO ÊúçÂä°Á´Ø„ÄÇ</p>
</li>
<li>
<p><code>#handleKeys()</code>¬†ÊñπÊ≥ïÔºöÂü∫‰∫é Selector Â§ÑÁêÜ IO Êìç‰Ωú„ÄÇ</p>
</li>
<li>
<p><code>#main(String[] args)</code>¬†ÊñπÊ≥ïÔºöÂàõÂª∫ NIO ÊúçÂä°Á´Ø„ÄÇ</p>
</li>
</ul>
<p>‰∏ãÈù¢ÔºåÊàë‰ª¨ÈÄêÂ∞èËäÇÊù•ÂàÜ‰∫´„ÄÇ</p>
<h2 id="httpsvipiocodercnnettynio-5-demo2-1-e69e84e980a0e696b9e6b395-21-ÊûÑÈÄ†ÊñπÊ≥ï21-ÊûÑÈÄ†ÊñπÊ≥ï"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-1-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"  title="2.1 ÊûÑÈÄ†ÊñπÊ≥ï"
     target="_blank" rel="noopener"
    ></a>2.1 ÊûÑÈÄ†ÊñπÊ≥ï</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 3 Ëá≥ 20 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p><code>serverSocketChannel</code>¬†Â±ûÊÄßÔºåÊúçÂä°Á´ØÁöÑ ServerSocketChannel ÔºåÂú®„ÄêÁ¨¨ 7 Ëá≥ 12 Ë°å„ÄëÁöÑ‰ª£Á†ÅËøõË°åÂàùÂßãÂåñÔºåÈáçÁÇπÊòØÊ≠§Â§ÑÂêØÂä®‰∫ÜÊúçÂä°Á´ØÔºåÂπ∂ÁõëÂê¨ÊåáÂÆöÁ´ØÂè£( Ê≠§Â§Ñ‰∏∫ 8080 )„ÄÇ</p>
</li>
<li>
<p><code>selector</code>¬†Â±ûÊÄßÔºåÈÄâÊã©Âô®ÔºåÂú®„ÄêÁ¨¨ 14 Ëá≥ 16 Ë°å„ÄëÁöÑ‰ª£Á†ÅËøõË°åÂàùÂßãÂåñÔºåÈáçÁÇπÊòØÊ≠§Â§ÑÂ∞Ü¬†<code>serverSocketChannel</code>¬†Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_ACCEPT</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇËøôÊ†∑Â≠êÔºåÂú®ÂÆ¢Êà∑Á´ØËøûÊé•ÊúçÂä°Á´ØÊó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Â§ÑÁêÜËØ• IO ‰∫ã‰ª∂„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 19 Ë°åÔºöË∞ÉÁî®¬†<code>#handleKeys()</code>¬†ÊñπÊ≥ïÔºåÂü∫‰∫é Selector Â§ÑÁêÜ IO ‰∫ã‰ª∂„ÄÇ</p>
</li>
</ul>
<h2 id="httpsvipiocodercnnettynio-5-demo2-2-handlekeys-22-handlekeys22-handlekeys"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-handleKeys"  title="2.2 handleKeys"
     target="_blank" rel="noopener"
    ></a>2.2 handleKeys</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 22 Ëá≥ 43 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>Á¨¨ 23 Ë°åÔºöÊ≠ªÂæ™ÁéØ„ÄÇÊú¨ÊñáÁöÑÁ§∫‰æãÔºå‰∏çËÄÉËôëÊúçÂä°Á´ØÂÖ≥Èó≠ÁöÑÈÄªËæë„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 24 Ëá≥ 29 Ë°åÔºöË∞ÉÁî®¬†<code>Selector#select(long timeout)</code>¬†ÊñπÊ≥ïÔºåÊØè 30 ÁßíÈòªÂ°ûÁ≠âÂæÖÊúâÂ∞±Áª™ÁöÑ IO ‰∫ã‰ª∂„ÄÇÊ≠§Â§ÑÁöÑ 30 Áßí‰∏∫Á¨îËÄÖÈöèÊÑèÂÜôÁöÑÔºåÂÆûÈôÖ‰πüÂèØ‰ª•ÊîπÊàêÂÖ∂‰ªñË∂ÖÊó∂Êó∂Èó¥ÔºåÊàñËÄÖ¬†<code>Selector#select()</code>¬†ÊñπÊ≥ï„ÄÇÂΩì‰∏çÂ≠òÂú®Â∞±Áª™ÁöÑ IO ‰∫ã‰ª∂ÔºåÁõ¥Êé•¬†<code>continue</code>¬†ÔºåÁªßÁª≠‰∏ã‰∏ÄÊ¨°ÈòªÂ°ûÁ≠âÂæÖ„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 32 Ë°åÔºöË∞ÉÁî®¬†<code>Selector#selectedKeys()</code>¬†ÊñπÊ≥ïÔºåËé∑ÂæóÊúâÂ∞±Áª™ÁöÑ IO ‰∫ã‰ª∂( ‰πüÂèØ‰ª•Áß∞‰∏∫‚ÄúÈÄâÊã©ÁöÑ‚Äù ) Channel ÂØπÂ∫îÁöÑ SelectionKey ÈõÜÂêà„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 33 Ë°å Ëá≥ 35 Ë°åÔºöÈÅçÂéÜ¬†<code>iterator</code>¬†ÔºåËøõË°åÈÄê‰∏™ SelectionKey Â§ÑÁêÜ„ÄÇÈáçÁÇπÊ≥®ÊÑè‰∏ãÔºåÂ§ÑÁêÜÂÆåÈúÄË¶ÅËøõË°åÁßªÈô§ÔºåÂÖ∑‰ΩìÂéüÂõ†ÔºåÂú®¬†<a class="link" href="http://svip.iocoder.cn/Netty/nio-4-selector/#10-%E7%AE%80%E5%8D%95-Selector-%E7%A4%BA%E4%BE%8B"  target="_blank" rel="noopener"
    >„ÄäÁ≤æÂ∞Ω Netty Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî NIO Âü∫Á°ÄÔºàÂõõÔºâ‰πã Selector„Äã„Äå10. ÁÆÄÂçï Selector Á§∫‰æã„Äç</a>¬†ÊúâËØ¶ÁªÜËß£Êûê„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 36 Ëá≥ 38 Ë°åÔºöÂú®ÈÅçÂéÜÁöÑËøáÁ®ã‰∏≠ÔºåÂèØËÉΩËØ• SelectionKey Â∑≤Áªè<strong>Â§±Êïà</strong>ÔºåÁõ¥Êé•¬†<code>continue</code>¬†Ôºå‰∏çËøõË°åÂ§ÑÁêÜ„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 40 Ë°åÔºöË∞ÉÁî®¬†<code>#handleKey()</code>¬†ÊñπÊ≥ïÔºåÈÄê‰∏™ SelectionKey Â§ÑÁêÜ„ÄÇ</p>
</li>
</ul>
<h3 id="httpsvipiocodercnnettynio-5-demo2-2-1-handlekey-221-handlekey221-handlekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-1-handleKey"  title="2.2.1 handleKey"
     target="_blank" rel="noopener"
    ></a>2.2.1 handleKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 45 Ëá≥ 58 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>ÈÄöËøáË∞ÉÁî® SelectionKey ÁöÑ¬†<code>#isAcceptable()</code>„ÄÅ<code>#isReadable()</code>„ÄÅ<code>#isWritable()</code>¬†ÊñπÊ≥ïÔºå<strong>ÂàÜÂà´</strong>Âà§Êñ≠ Channel ÊòØ<strong>Êé•ÂèóËøûÊé•</strong>Â∞±Áª™ÔºåËøòÊòØ<strong>ËØª</strong>Â∞±Áª™ÔºåÊàñÊòØ<strong>ÂÜô</strong>Â∞±Áª™ÔºåÂπ∂Ë∞ÉÁî®Áõ∏Â∫îÁöÑ¬†<code>#handleXXXX(SelectionKey key)</code>¬†ÊñπÊ≥ïÔºåÂ§ÑÁêÜÂØπÂ∫îÁöÑ IO ‰∫ã‰ª∂„ÄÇ</p>
</li>
<li>
<p>Âõ†‰∏∫ SelectionKey ÂèØ‰ª•<strong>ÂêåÊó∂</strong>ÂØπ<strong>‰∏Ä‰∏™</strong>¬†Channel ÁöÑ<strong>Â§ö‰∏™</strong>‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£ÔºåÊâÄ‰ª•Ê≠§Â§ÑÁöÑ‰ª£Á†ÅÈÉΩÊòØ¬†<code>if</code>¬†Âà§Êñ≠ÔºåËÄå‰∏çÊòØ¬†<code>if else</code>¬†Âà§Êñ≠„ÄÇüòà ËôΩÁÑ∂ÔºåËÄÉËôëÂà∞ËÆ©Á§∫‰æãÊõ¥ÁÆÄÂçïÔºåÊú¨ÊñáÁöÑÂπ∂Êú™ÁºñÂÜôÂêåÊó∂ÂØπ‰∏Ä‰∏™ Channel ÁöÑÂ§ö‰∏™‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£ÔºåÂêéÁª≠Êàë‰ª¨‰ºöÂú® Netty ÁöÑÊ∫êÁ†ÅËß£Êûê‰∏≠ÁúãÂà∞„ÄÇ</p>
</li>
<li>
<p><code>SelectionKey.OP_CONNECT</code>¬†‰ΩøÁî®Âú®<strong>ÂÆ¢Êà∑Á´Ø</strong>‰∏≠ÔºåÊâÄ‰ª•Ê≠§Â§Ñ‰∏çÈúÄË¶ÅÂÅöÁõ∏Â∫îÁöÑÂà§Êñ≠ÂíåÂ§ÑÁêÜ„ÄÇ</p>
</li>
</ul>
<h3 id="httpsvipiocodercnnettynio-5-demo2-2-2-handleacceptablekey-222-handleacceptablekey222-handleacceptablekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-2-handleAcceptableKey"  title="2.2.2 handleAcceptableKey"
     target="_blank" rel="noopener"
    ></a>2.2.2 handleAcceptableKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 60 Ëá≥ 69 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>Á¨¨ 62 Ë°åÔºöË∞ÉÁî®¬†<code>ServerSocketChannel#accept()</code>¬†ÊñπÊ≥ïÔºåËé∑ÂæóËøûÊé•ÁöÑÂÆ¢Êà∑Á´ØÁöÑ SocketChannel „ÄÇ</p>
</li>
<li>
<p>Á¨¨ 64 Ë°åÔºöÈÖçÁΩÆÂÆ¢Êà∑Á´ØÁöÑ SocketChannel ‰∏∫ÈùûÈòªÂ°ûÔºåÂê¶ÂàôÊó†Ê≥ï‰ΩøÁî® Selector „ÄÇ</p>
</li>
<li>
<p>Á¨¨ 66 Ë°åÔºöÊâìÂç∞Êó•ÂøóÔºåÊñπ‰æøË∞ÉËØï„ÄÇÂÆûÈôÖÂú∫ÊôØ‰∏ãÔºå‰ΩøÁî® Logger ËÄå‰∏çË¶Å‰ΩøÁî®¬†<code>System.out</code>¬†ËøõË°åËæìÂá∫„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 68 Ë°åÔºöÊ≥®ÂÜåÂÆ¢Êà∑Á´ØÁöÑ SocketChannel Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_READ</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇËøôÊ†∑Â≠êÔºåÂú®ÂÆ¢Êà∑Á´ØÂèëÈÄÅÊ∂àÊÅØ( Êï∞ÊçÆ )Âà∞ÊúçÂä°Á´ØÊó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Â§ÑÁêÜËØ• IO ‰∫ã‰ª∂„ÄÇ</p>
</li>
<li>
<p>‰∏∫‰ªÄ‰πà‰∏çÂØπ¬†<code>SelectionKey.OP_WRITE</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£Âë¢ÔºüÂõ†‰∏∫Ëøô‰∏™Êó∂ÂÄôÔºåÊúçÂä°Á´Ø‰∏ÄËà¨‰∏ç‰ºö‰∏ªÂä®ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÊ∂àÊÅØÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÂØπ¬†<code>SelectionKey.OP_WRITE</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇ</p>
</li>
<li>
<p>ÁªÜÂøÉÁöÑËÉñÂèã‰ºöÂèëÁé∞Ôºå<code>Channel#register(Selector selector, int ops, Object attachment)</code>¬†ÊñπÊ≥ïÁöÑÁ¨¨ 3 ‰∏™ÂèÇÊï∞ÔºåÊàë‰ª¨Ê≥®ÂÜå‰∫Ü SelectionKey ÁöÑ¬†<code>attachment</code>¬†Â±ûÊÄß‰∏∫¬†<code>new ArrayList&lt;String&gt;()</code>¬†ÔºåËøôÂèàÊòØ‰∏∫‰ªÄ‰πàÂë¢ÔºüÁªìÂêà‰∏ãÈù¢ÁöÑ¬†<code>#handleReadableKey(Selection key)</code>¬†ÊñπÊ≥ïÔºåÊàë‰ª¨‰∏ÄËµ∑Ëß£Êûê„ÄÇ</p>
</li>
</ul>
<h3 id="httpsvipiocodercnnettynio-5-demo2-2-3-handlereadablekey-223-handlereadablekey223-handlereadablekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-3-handleReadableKey"  title="2.2.3 handleReadableKey"
     target="_blank" rel="noopener"
    ></a>2.2.3 handleReadableKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 71 Ëá≥ 93 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>Á¨¨ 73 Ë°åÔºöË∞ÉÁî®¬†<code>SelectionKey#channel()</code>¬†ÊñπÊ≥ïÔºåËé∑ÂæóËØ• SelectionKey ÂØπÂ∫îÁöÑ SocketChannel ÔºåÂç≥ÂÆ¢Êà∑Á´ØÁöÑ SocketChannel „ÄÇ</p>
</li>
<li>
<p>Á¨¨ 75 Ë°åÔºöË∞ÉÁî®¬†<code>CodecUtil#read(SocketChannel channel)</code>¬†ÊñπÊ≥ïÔºåËØªÂèñÊï∞ÊçÆ„ÄÇÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// CodecUtil.java  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">public static ByteBuffer read(SocketChannel channel) {  
</span></span><span class="line"><span class="cl"> // Ê≥®ÊÑèÔºå‰∏çËÄÉËôëÊãÜÂåÖÁöÑÂ§ÑÁêÜ  
</span></span><span class="line"><span class="cl"> ByteBuffer buffer = ByteBuffer.allocate(1024);  
</span></span><span class="line"><span class="cl"> try {  
</span></span><span class="line"><span class="cl"> int count = channel.read(buffer);  
</span></span><span class="line"><span class="cl"> if (count == -1) {  
</span></span><span class="line"><span class="cl"> return null;  
</span></span><span class="line"><span class="cl"> }  
</span></span><span class="line"><span class="cl"> } catch (IOException e) {  
</span></span><span class="line"><span class="cl"> throw new RuntimeException(e);  
</span></span><span class="line"><span class="cl"> }  
</span></span><span class="line"><span class="cl"> return buffer;  
</span></span><span class="line"><span class="cl">}  
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ËÄÉËôëÂà∞Á§∫‰æãÁöÑÁÆÄÂçïÊÄßÔºåÊï∞ÊçÆÁöÑËØªÂèñÔºåÂ∞±‰∏çËÄÉËôëÊãÜÂåÖÁöÑÂ§ÑÁêÜ„ÄÇ‰∏çÁêÜËß£ÁöÑËÉñÂèãÔºåÂèØ‰ª•Ëá™Â∑± Google ‰∏ã„ÄÇ</p>
</li>
<li>
<p>Ë∞ÉÁî®¬†<code>SocketChannel#read(ByteBuffer)</code>¬†ÊñπÊ≥ïÔºåËØªÂèñ Channel ÁöÑÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÂà∞ ByteBuffer ‰∏≠„ÄÇËã•ËøîÂõûÁöÑÁªìÊûú(¬†<code>count</code>¬†) ‰∏∫ -1 ÔºåÊÑèÂë≥ÁùÄÂÆ¢Êà∑Á´ØËøûÊé•Â∑≤ÁªèÊñ≠ÂºÄÔºåÊàë‰ª¨Áõ¥Êé•ËøîÂõû¬†<code>null</code>¬†„ÄÇ‰∏∫‰ªÄ‰πàÊòØËøîÂõû¬†<code>null</code>¬†Âë¢Ôºü‰∏ãÈù¢ÁªßÁª≠ËßÅÂàÜÊôì„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 76 Ëá≥ 81 Ë°åÔºöËã•ËØªÂèñÊï∞ÊçÆËøîÂõûÁöÑÁªìÊûú‰∏∫¬†<code>null</code>¬†Êó∂ÔºåÊÑèÂë≥ÁùÄÂÆ¢Êà∑Á´ØÁöÑËøûÊé•Â∑≤ÁªèÊñ≠ÂºÄÔºåÂõ†Ê≠§ÂèñÊ∂àÊ≥®ÂÜå¬†<code>selector</code>¬†ÂØπËØ•ÂÆ¢Êà∑Á´ØÁöÑ SocketChannel ÁöÑÊÑüÂÖ¥Ë∂£ÁöÑ IO ‰∫ã‰ª∂„ÄÇÈÄöËøáË∞ÉÁî®Ê≥®ÂÜåÊñπÊ≥ïÔºåÂπ∂‰∏îÁ¨¨ 2 ‰∏™ÂèÇÊï∞¬†<code>ops</code>¬†‰∏∫ 0 ÔºåÂèØ‰ª•ËææÂà∞ÂèñÊ∂àÊ≥®ÂÜåÁöÑÊïàÊûú„ÄÇüòà ÊÑüÂÖ¥Ë∂£ÁöÑËÉñÂèãÔºåÂèØ‰ª•Â∞ÜËøôË°å‰ª£Á†ÅËøõË°åÊ≥®ÈáäÔºåÊµãËØï‰∏ãÊïàÊûúÂ∞±ÂæàÂÆπÊòìÊòéÁôΩ‰∫Ü„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 83 Ë°åÔºöÈÄöËøáË∞ÉÁî®¬†<code>ByteBuffer#position()</code>¬†Â§ß‰∫é 0 ÔºåÊù•Âà§Êñ≠<strong>ÂÆûÈôÖ</strong>ËØªÂèñÂà∞Êï∞ÊçÆ„ÄÇ</p>
</li>
<li>
<p>ÊâÄ‰ª•ÔºåÊ≠§Â§ÑÁ¨îËÄÖÂú®Á§∫‰æã‰∏≠ÔºåÂ§ÑÁêÜÁöÑÊñπÂºè‰∏∫Ê∑ªÂä†ÂìçÂ∫îÊï∞ÊçÆÂà∞¬†<code>responseQueue</code>¬†‰∏≠ÔºåÂπ∂Âú®„ÄêÁ¨¨ 91 Ë°å„ÄëÁöÑ‰ª£Á†Å‰∏≠ÔºåÊ≥®ÂÜåÂÆ¢Êà∑Á´ØÁöÑ SocketChannel Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_WRITE</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇËøôÊ†∑Â≠êÔºåÂú® SocketChannel¬†<strong>ÂÜôÂ∞±Áª™</strong>Êó∂ÔºåÂú®¬†<code>#handleWritableKey(SelectionKey key)</code>¬†ÊñπÊ≥ï‰∏≠ÔºåÁªü‰∏ÄÂ§ÑÁêÜÂÜôÊï∞ÊçÆÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p>
</li>
<li>
<p>ÂΩìÁÑ∂ÔºåËøòÊòØÂõ†‰∏∫ÊòØÁ§∫‰æãÔºåÊâÄ‰ª•ËøôÊ†∑ÁöÑÂÆûÁé∞ÊñπÂºè‰∏çÊòØÊúÄ‰ºò„ÄÇÂú® Netty ‰∏≠ÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÊñπÂºèÊòØÔºåÂÖàÂ∞ùËØïË∞ÉÁî®¬†<code>SocketChannel#write(ByteBuf)</code>¬†ÊñπÊ≥ïÔºåÂÜôÊï∞ÊçÆÁªôÂÆ¢Êà∑Á´Ø„ÄÇËã•ÂÜôÂÖ•Â§±Ë¥•( ÊñπÊ≥ïËøîÂõûÁªìÊûú‰∏∫ 0 )Êó∂ÔºåÂÜçËøõË°åÁ±ª‰ººÁ¨îËÄÖÁöÑ‰∏äËø∞ÂÆûÁé∞ÊñπÂºè„ÄÇÁâõÈÄºÔºÅNetty ÔºÅ</p>
</li>
<li>
<p>Â¶ÇÊûú‰∏çÂ§™ÁêÜËß£ÂàÜ‰∫´ÁöÑÂéüÂõ†ÔºåÂèØ‰ª•ÂÜçÈòÖËØªÂ¶Ç‰∏ã‰∏§ÁØáÊñáÁ´†Ôºö</p>
</li>
<li>
<p><a class="link" href="https://mp.weixin.qq.com/s/V4tEH1j64FHFmB8bReNI7g"  target="_blank" rel="noopener"
    >„ÄäÊ∑±Â§úÂØπËØùÔºöNIO ‰∏≠ SelectionKey.OP_WRITE ‰Ω†‰∫ÜËß£Â§öÂ∞ë„Äã</a></p>
</li>
<li>
<p><a class="link" href="https://blog.csdn.net/a34140974/article/details/48464845"  target="_blank" rel="noopener"
    >„ÄäJava.nio ‰∏≠ socketChannle.write() ËøîÂõû 0 ÁöÑÁÆÄÊòìËß£ÂÜ≥ÊñπÊ°à„Äã</a></p>
</li>
<li>
<p>üòà Â¶ÇÊûú‰∏çÁêÜËß£ÔºåÊú®ÊúâÂÖ≥Á≥ªÔºåÂú®¬†<a class="link" href="http://svip.iocoder.cn/Dubbo/remoting-api-transport/"  target="_blank" rel="noopener"
    >„ÄäÁ≤æÂ∞Ω Dubbo Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî NIO ÊúçÂä°Âô®Ôºà‰∫åÔºâ‰πã Transport Â±Ç„Äã„Äå8. Dispacher„Äç</a>¬†‰∏≠ÔºåÊúâËØ¶ÁªÜËß£Êûê„ÄÇ</p>
</li>
<li>
<p>üôÇ ËÄÉËôëÂà∞Á§∫‰æãÁöÑÁÆÄÊ¥ÅÊÄßÔºåÊâÄ‰ª•Âú®„ÄêÁ¨¨ 88 Ëá≥ 89 Ë°å„ÄëÁöÑ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨Áõ¥Êé•ËøîÂõûÔºà<code>&quot;ÂìçÂ∫îÔºö&quot;</code>¬†+ ËØ∑Ê±ÇÂÜÖÂÆπÔºâÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p>
</li>
<li>
<p>Ê≥®ÊÑèÔºåÈúÄË¶ÅË∞ÉÁî®¬†<code>ByteBuffer#flip()</code>¬†ÊñπÊ≥ïÔºåÂ∞Ü ByteBuffer ‰ªé<strong>ÂÜô</strong>Ê®°ÂºèÂàáÊç¢Âà∞<strong>ËØª</strong>Ê®°Âºè„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 84 Ëá≥ 85 Ë°åÔºöË∞ÉÁî®¬†<code>CodecUtil#newString(ByteBuffer)</code>¬†ÊñπÊ≥ïÔºåÊ†ºÂºèÂåñ‰∏∫Â≠óÁ¨¶‰∏≤ÔºåÂπ∂ËøõË°åÊâìÂç∞„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// CodecUtil.java  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">public static String newString(ByteBuffer buffer) {  
</span></span><span class="line"><span class="cl"> buffer.flip();  
</span></span><span class="line"><span class="cl"> byte\[\] bytes = new byte\[buffer.remaining()\];  
</span></span><span class="line"><span class="cl"> System.arraycopy(buffer.array(), buffer.position(), bytes, 0, buffer.remaining());  
</span></span><span class="line"><span class="cl"> try {  
</span></span><span class="line"><span class="cl"> return new String(bytes, &#34;UTF-8&#34;);  
</span></span><span class="line"><span class="cl"> } catch (UnsupportedEncodingException e) {  
</span></span><span class="line"><span class="cl"> throw new RuntimeException(e);  
</span></span><span class="line"><span class="cl"> }  
</span></span><span class="line"><span class="cl">}  
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Á¨¨ 86 Ë°åÔºö‰∏ÄËà¨Âú®Ê≠§Â§ÑÔºåÊàë‰ª¨ÂèØ‰ª•ËøõË°å‰∏Ä‰∫õ‰∏öÂä°ÈÄªËæëÁöÑÂ§ÑÁêÜÔºåÂπ∂ËøîÂõûÂ§ÑÁêÜÁöÑÁõ∏Â∫îÁªìÊûú„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨ÁÜüÊÇâÁöÑ Request / Response ÁöÑÂ§ÑÁêÜ„ÄÇÂΩìÁÑ∂ÔºåËÄÉËôëÂà∞ÊÄßËÉΩÔºåÊàë‰ª¨ÁîöËá≥ÂèØ‰ª•Â∞ÜÈÄªËæëÁöÑÂ§ÑÁêÜÔºå‰∏¢Âà∞ÈÄªËæëÁ∫øÁ®ãÊ±†„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 88 Ë°åÔºöÈÄöËøáË∞ÉÁî®¬†<code>SelectionKey#attachment()</code>¬†ÊñπÊ≥ïÔºåËé∑ÂæóÊàë‰ª¨<strong>ÈôÑÂä†</strong>Âú® SelectionKey ÁöÑÂìçÂ∫îÈòüÂàó(¬†<code>responseQueue</code>¬†)„ÄÇÂèØËÉΩÊúâËÉñÂèã‰ºöÈóÆÂï¶Ôºå‰∏∫‰ªÄ‰πà‰∏çË∞ÉÁî®¬†<code>SocketChannel#write(ByteBuf)</code>¬†ÊñπÊ≥ïÔºåÁõ¥Êé•ÂÜôÊï∞ÊçÆÁªôÂÆ¢Êà∑Á´ØÂë¢ÔºüËôΩÁÑ∂Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåSocketChannel ÈÉΩÊòØ<strong>ÂèØÂÜô</strong>ÁöÑÔºå‰ΩÜÊòØÂ¶ÇÊûúÂÜôÂÖ•ÊØîËæÉÈ¢ëÁπÅÔºåË∂ÖËøá SocketChannel ÁöÑÁºìÂ≠òÂå∫Â§ßÂ∞èÔºåÂ∞±‰ºöÂØºËá¥Êï∞ÊçÆ‚Äú<strong>‰∏¢Â§±</strong>‚ÄùÔºåÂπ∂Êú™ÂÜôÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 91 Ë°åÔºöÊúâ‰∏ÄÁÇπÈúÄË¶ÅÊ≥®ÊÑèÔºå<code>Channel#register(Selector selector, int ops, Object attachment)</code>¬†ÊñπÊ≥ïÁöÑÁ¨¨ 3 ‰∏™ÂèÇÊï∞ÔºåÈúÄË¶ÅÁªßÁª≠‰º†ÂÖ•ÂìçÂ∫îÈòüÂàó(¬†<code>responseQueue</code>¬†)ÔºåÂõ†‰∏∫ÊØèÊ¨°Ê≥®ÂÜåÁîüÊàê<strong>Êñ∞</strong>ÁöÑ SelectionKey „ÄÇËã•‰∏ç‰º†ÂÖ•Ôºå‰∏ãÈù¢ÁöÑ¬†<code>#handleWritableKey(SelectionKey key)</code>¬†ÊñπÊ≥ïÔºå‰ºöËé∑Âæó‰∏çÂà∞ÂìçÂ∫îÈòüÂàó(¬†<code>responseQueue</code>¬†)„ÄÇ</p>
</li>
</ul>
<h3 id="httpsvipiocodercnnettynio-5-demo2-2-4-handlewritablekey-224-handlewritablekey224-handlewritablekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-4-handleWritableKey"  title="2.2.4 handleWritableKey"
     target="_blank" rel="noopener"
    ></a>2.2.4 handleWritableKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 96 Ëá≥ 112 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>Á¨¨ 98 Ë°åÔºöË∞ÉÁî®¬†<code>SelectionKey#channel()</code>¬†ÊñπÊ≥ïÔºåËé∑ÂæóËØ• SelectionKey ÂØπÂ∫îÁöÑ SocketChannel ÔºåÂç≥ÂÆ¢Êà∑Á´ØÁöÑ SocketChannel „ÄÇ</p>
</li>
<li>
<p>Á¨¨ 101 Ë°åÔºöÈÄöËøáË∞ÉÁî®¬†<code>SelectionKey#attachment()</code>¬†ÊñπÊ≥ïÔºåËé∑ÂæóÊàë‰ª¨<strong>ÈôÑÂä†</strong>Âú® SelectionKey ÁöÑÂìçÂ∫îÈòüÂàó(¬†<code>responseQueue</code>¬†)„ÄÇ</p>
</li>
<li>
<p>‰ª£Á†ÅÊØîËæÉÁÆÄÂçïÔºå<strong>ËøòÊòØË¶ÅÊ≥®ÊÑè</strong>ÔºåÈúÄË¶ÅË∞ÉÁî®¬†<code>ByteBuffer#flip()</code>¬†ÊñπÊ≥ïÔºåÂ∞Ü ByteBuffer ‰ªé<strong>ÂÜô</strong>Ê®°ÂºèÂàáÊç¢Âà∞<strong>ËØª</strong>Ê®°Âºè„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 102 Ë°åÔºöÈÅçÂéÜÂìçÂ∫îÈòüÂàó„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 106 Ë°åÔºöË∞ÉÁî®¬†<code>CodeUtil#write(SocketChannel, content)</code>¬†ÊñπÊ≥ïÔºåÂÜôÂÖ•ÂìçÂ∫îÊï∞ÊçÆÁªôÂÆ¢Êà∑Á´Ø„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> // CodecUtil.java  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">public static void write(SocketChannel channel, String content) {  
</span></span><span class="line"><span class="cl"> // ÂÜôÂÖ• Buffer  
</span></span><span class="line"><span class="cl"> ByteBuffer buffer = ByteBuffer.allocate(1024);  
</span></span><span class="line"><span class="cl"> try {  
</span></span><span class="line"><span class="cl"> buffer.put(content.getBytes(&#34;UTF-8&#34;));  
</span></span><span class="line"><span class="cl"> } catch (UnsupportedEncodingException e) {  
</span></span><span class="line"><span class="cl"> throw new RuntimeException(e);  
</span></span><span class="line"><span class="cl"> }  
</span></span><span class="line"><span class="cl"> // ÂÜôÂÖ• Channel  
</span></span><span class="line"><span class="cl"> buffer.flip();  
</span></span><span class="line"><span class="cl"> try {  
</span></span><span class="line"><span class="cl"> // Ê≥®ÊÑèÔºå‰∏çËÄÉËôëÂÜôÂÖ•Ë∂ÖËøá Channel ÁºìÂ≠òÂå∫‰∏äÈôê„ÄÇ  
</span></span><span class="line"><span class="cl"> channel.write(buffer);  
</span></span><span class="line"><span class="cl"> } catch (IOException e) {  
</span></span><span class="line"><span class="cl"> throw new RuntimeException(e);  
</span></span><span class="line"><span class="cl"> }  
</span></span><span class="line"><span class="cl">}  
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Á¨¨ 111 Ë°åÔºö<strong>Ê≥®ÊÑè</strong>ÔºåÂÜçÁªìÊùüÂÜôÂÖ•ÂêéÔºåÈúÄË¶Å<strong>ÈáçÊñ∞</strong>Ê≥®ÂÜåÂÆ¢Êà∑Á´ØÁöÑ SocketChannel Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_READ</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇ‰∏∫‰ªÄ‰πàÂë¢ÔºüÂÖ∂ÂÆûËøòÊòØÊàë‰ª¨Âú®‰∏äÊñá‰∏≠ÊèêÂà∞ÁöÑÔºåÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåSocketChannel¬†<strong>ÈÉΩÊòØÂÜôÂ∞±Áª™ÁöÑ</strong>ÔºåÂ¶ÇÊûú‰∏çÂèñÊ∂àÊéâÊ≥®ÂÜåÊéâÂØπ¬†<code>SelectionKey.OP_READ</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£ÔºåÂ∞±‰ºöÂØºËá¥ÂèçÂ§çËß¶ÂèëÊó†Áî®ÁöÑÂÜô‰∫ã‰ª∂Â§ÑÁêÜ„ÄÇüòà ÊÑüÂÖ¥Ë∂£ÁöÑËÉñÂèãÔºåÂèØ‰ª•Â∞ÜËøôË°å‰ª£Á†ÅËøõË°åÊ≥®ÈáäÔºåÊµãËØï‰∏ãÊïàÊûúÂ∞±ÂæàÂÆπÊòìÊòéÁôΩ‰∫Ü„ÄÇ</p>
</li>
</ul>
<h2 id="httpsvipiocodercnnettynio-5-demo2-3-main-23-main23-main"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#2-3-main"  title="2.3 main"
     target="_blank" rel="noopener"
    ></a>2.3 main</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 114 Ëá≥ 116 Ë°å„Äë</p>
</blockquote>
<ul>
<li>ÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™ NioServer ÂØπË±°„ÄÇ</li>
</ul>
<p>Êí∏Âà∞Ê≠§Â§ÑÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ÈÄöËøá¬†<code>telnet 127.0.0.1 8080</code>¬†ÁöÑÊñπÂºèÔºåËøûÊé•ÊúçÂä°Á´ØÔºåËøõË°åËØªÂÜôÊï∞ÊçÆÁöÑÊµãËØï„ÄÇ</p>
<h1 id="httpsvipiocodercnnettynio-5-demo3-e5aea2e688b7e7abaf-3-ÂÆ¢Êà∑Á´Ø3-ÂÆ¢Êà∑Á´Ø"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-%E5%AE%A2%E6%88%B7%E7%AB%AF"  title="3. ÂÆ¢Êà∑Á´Ø"
     target="_blank" rel="noopener"
    ></a>3. ÂÆ¢Êà∑Á´Ø</h1>
<p>ÂÆ¢Êà∑Á´ØÁöÑÂÆûÁé∞‰ª£Á†ÅÔºåÁªùÂ§ßÊï∞ÂíåÊúçÂä°Á´ØÁõ∏ÂêåÔºåÊâÄ‰ª•Êàë‰ª¨ÂàÜÊûêÁöÑÁõ∏ÂØπ‰ºöÁÆÄÁï•‰∏Ä‰∫õ„ÄÇ‰∏çÁÑ∂ÔºåËá™Â∑±ÈÉΩÂ´åÂºÉËá™Â∑±Â§™Âï∞Âó¶‰∫Ü„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> 1: public class NioClient {  
</span></span><span class="line"><span class="cl"> 2:   
</span></span><span class="line"><span class="cl"> 3: ¬† ¬† private SocketChannel clientSocketChannel;  
</span></span><span class="line"><span class="cl"> 4: ¬† ¬† private Selector selector;  
</span></span><span class="line"><span class="cl"> 5: ¬† ¬† private final List&lt;String&gt; responseQueue = new ArrayList&lt;String&gt;();  
</span></span><span class="line"><span class="cl"> 6:   
</span></span><span class="line"><span class="cl"> 7: ¬† ¬† private CountDownLatch connected = new CountDownLatch(1);  
</span></span><span class="line"><span class="cl"> 8:   
</span></span><span class="line"><span class="cl"> 9: ¬† ¬† public NioClient() throws IOException, InterruptedException {  
</span></span><span class="line"><span class="cl"> 10: ¬† ¬† ¬† ¬† // ÊâìÂºÄ Client Socket Channel  
</span></span><span class="line"><span class="cl"> 11: ¬† ¬† ¬† ¬† clientSocketChannel = SocketChannel.open();  
</span></span><span class="line"><span class="cl"> 12: ¬† ¬† ¬† ¬† // ÈÖçÁΩÆ‰∏∫ÈùûÈòªÂ°û  
</span></span><span class="line"><span class="cl"> 13: ¬† ¬† ¬† ¬† clientSocketChannel.configureBlocking(false);  
</span></span><span class="line"><span class="cl"> 14: ¬† ¬† ¬† ¬† // ÂàõÂª∫ Selector  
</span></span><span class="line"><span class="cl"> 15: ¬† ¬† ¬† ¬† selector = Selector.open();  
</span></span><span class="line"><span class="cl"> 16: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Server Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl"> 17: ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_CONNECT);  
</span></span><span class="line"><span class="cl"> 18: ¬† ¬† ¬† ¬† // ËøûÊé•ÊúçÂä°Âô®  
</span></span><span class="line"><span class="cl"> 19: ¬† ¬† ¬† ¬† clientSocketChannel.connect(new InetSocketAddress(8080));  
</span></span><span class="line"><span class="cl"> 20:   
</span></span><span class="line"><span class="cl"> 21: ¬† ¬† ¬† ¬† new Thread(new Runnable() {  
</span></span><span class="line"><span class="cl"> 22: ¬† ¬† ¬† ¬† ¬† ¬† @Override  
</span></span><span class="line"><span class="cl"> 23: ¬† ¬† ¬† ¬† ¬† ¬† public void run() {  
</span></span><span class="line"><span class="cl"> 24: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† try {  
</span></span><span class="line"><span class="cl"> 25: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† handleKeys();  
</span></span><span class="line"><span class="cl"> 26: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† } catch (IOException e) {  
</span></span><span class="line"><span class="cl"> 27: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† e.printStackTrace();  
</span></span><span class="line"><span class="cl"> 28: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 29: ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 30: ¬† ¬† ¬† ¬† }).start();  
</span></span><span class="line"><span class="cl"> 31:   
</span></span><span class="line"><span class="cl"> 32: ¬† ¬† ¬† ¬† if (connected.getCount() != 0) {  
</span></span><span class="line"><span class="cl"> 33: ¬† ¬† ¬† ¬† ¬† ¬† connected.await();  
</span></span><span class="line"><span class="cl"> 34: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 35: ¬† ¬† ¬† ¬† System.out.println(&#34;Client ÂêØÂä®ÂÆåÊàê&#34;);  
</span></span><span class="line"><span class="cl"> 36: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 37:   
</span></span><span class="line"><span class="cl"> 38: ¬† ¬† @SuppressWarnings(&#34;Duplicates&#34;)  
</span></span><span class="line"><span class="cl"> 39: ¬† ¬† private void handleKeys() throws IOException {  
</span></span><span class="line"><span class="cl"> 40: ¬† ¬† ¬† ¬† while (true) {  
</span></span><span class="line"><span class="cl"> 41: ¬† ¬† ¬† ¬† ¬† ¬† // ÈÄöËøá Selector ÈÄâÊã© Channel  
</span></span><span class="line"><span class="cl"> 42: ¬† ¬† ¬† ¬† ¬† ¬† int selectNums = selector.select(30 \* 1000L);  
</span></span><span class="line"><span class="cl"> 43: ¬† ¬† ¬† ¬† ¬† ¬† if (selectNums == 0) {  
</span></span><span class="line"><span class="cl"> 44: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† continue;  
</span></span><span class="line"><span class="cl"> 45: ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 46:   
</span></span><span class="line"><span class="cl"> 47: ¬† ¬† ¬† ¬† ¬† ¬† // ÈÅçÂéÜÂèØÈÄâÊã©ÁöÑ Channel ÁöÑ SelectionKey ÈõÜÂêà  
</span></span><span class="line"><span class="cl"> 48: ¬† ¬† ¬† ¬† ¬† ¬† Iterator&lt;SelectionKey&gt; iterator = selector.selectedKeys().iterator();  
</span></span><span class="line"><span class="cl"> 49: ¬† ¬† ¬† ¬† ¬† ¬† while (iterator.hasNext()) {  
</span></span><span class="line"><span class="cl"> 50: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† SelectionKey key = iterator.next();  
</span></span><span class="line"><span class="cl"> 51: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† iterator.remove(); // ÁßªÈô§‰∏ãÈù¢Ë¶ÅÂ§ÑÁêÜÁöÑ SelectionKey  
</span></span><span class="line"><span class="cl"> 52: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† if (!key.isValid()) { // ÂøΩÁï•Êó†ÊïàÁöÑ SelectionKey  
</span></span><span class="line"><span class="cl"> 53: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† continue;  
</span></span><span class="line"><span class="cl"> 54: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 55:   
</span></span><span class="line"><span class="cl"> 56: ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† handleKey(key);  
</span></span><span class="line"><span class="cl"> 57: ¬† ¬† ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 58: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 59: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 60:   
</span></span><span class="line"><span class="cl"> 61: ¬† ¬† private synchronized void handleKey(SelectionKey key) throws IOException {  
</span></span><span class="line"><span class="cl"> 62: ¬† ¬† ¬† ¬† // Êé•ÂèóËøûÊé•Â∞±Áª™  
</span></span><span class="line"><span class="cl"> 63: ¬† ¬† ¬† ¬† if (key.isConnectable()) {  
</span></span><span class="line"><span class="cl"> 64: ¬† ¬† ¬† ¬† ¬† ¬† handleConnectableKey(key);  
</span></span><span class="line"><span class="cl"> 65: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 66: ¬† ¬† ¬† ¬† // ËØªÂ∞±Áª™  
</span></span><span class="line"><span class="cl"> 67: ¬† ¬† ¬† ¬† if (key.isReadable()) {  
</span></span><span class="line"><span class="cl"> 68: ¬† ¬† ¬† ¬† ¬† ¬† handleReadableKey(key);  
</span></span><span class="line"><span class="cl"> 69: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 70: ¬† ¬† ¬† ¬† // ÂÜôÂ∞±Áª™  
</span></span><span class="line"><span class="cl"> 71: ¬† ¬† ¬† ¬† if (key.isWritable()) {  
</span></span><span class="line"><span class="cl"> 72: ¬† ¬† ¬† ¬† ¬† ¬† handleWritableKey(key);  
</span></span><span class="line"><span class="cl"> 73: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 74: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 75:   
</span></span><span class="line"><span class="cl"> 76: ¬† ¬† private void handleConnectableKey(SelectionKey key) throws IOException {  
</span></span><span class="line"><span class="cl"> 77: ¬† ¬† ¬† ¬† // ÂÆåÊàêËøûÊé•  
</span></span><span class="line"><span class="cl"> 78: ¬† ¬† ¬† ¬† if (!clientSocketChannel.isConnectionPending()) {  
</span></span><span class="line"><span class="cl"> 79: ¬† ¬† ¬† ¬† ¬† ¬† return;  
</span></span><span class="line"><span class="cl"> 80: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 81: ¬† ¬† ¬† ¬† clientSocketChannel.finishConnect();  
</span></span><span class="line"><span class="cl"> 82: ¬† ¬† ¬† ¬† // log  
</span></span><span class="line"><span class="cl"> 83: ¬† ¬† ¬† ¬† System.out.println(&#34;Êé•ÂèóÊñ∞ÁöÑ Channel&#34;);  
</span></span><span class="line"><span class="cl"> 84: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Client Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl"> 85: ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_READ, responseQueue);  
</span></span><span class="line"><span class="cl"> 86: ¬† ¬† ¬† ¬† // Ê†áËÆ∞‰∏∫Â∑≤ËøûÊé•  
</span></span><span class="line"><span class="cl"> 87: ¬† ¬† ¬† ¬† connected.countDown();  
</span></span><span class="line"><span class="cl"> 88: ¬† ¬† }  
</span></span><span class="line"><span class="cl"> 89:   
</span></span><span class="line"><span class="cl"> 90: ¬† ¬† @SuppressWarnings(&#34;Duplicates&#34;)  
</span></span><span class="line"><span class="cl"> 91: ¬† ¬† private void handleReadableKey(SelectionKey key) throws ClosedChannelException {  
</span></span><span class="line"><span class="cl"> 92: ¬† ¬† ¬† ¬† // Client Socket Channel  
</span></span><span class="line"><span class="cl"> 93: ¬† ¬† ¬† ¬† SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
</span></span><span class="line"><span class="cl"> 94: ¬† ¬† ¬† ¬† // ËØªÂèñÊï∞ÊçÆ  
</span></span><span class="line"><span class="cl"> 95: ¬† ¬† ¬† ¬† ByteBuffer readBuffer = CodecUtil.read(clientSocketChannel);  
</span></span><span class="line"><span class="cl"> 96: ¬† ¬† ¬† ¬† // ÊâìÂç∞Êï∞ÊçÆ  
</span></span><span class="line"><span class="cl"> 97: ¬† ¬† ¬† ¬† if (readBuffer.position() &gt; 0) { // ÂÜôÂÖ•Ê®°Âºè‰∏ãÔºå  
</span></span><span class="line"><span class="cl"> 98: ¬† ¬† ¬† ¬† ¬† ¬† String content = CodecUtil.newString(readBuffer);  
</span></span><span class="line"><span class="cl"> 99: ¬† ¬† ¬† ¬† ¬† ¬† System.out.println(&#34;ËØªÂèñÊï∞ÊçÆÔºö&#34; \+ content);  
</span></span><span class="line"><span class="cl">100: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl">101: ¬† ¬† }  
</span></span><span class="line"><span class="cl">102:   
</span></span><span class="line"><span class="cl">103: ¬† ¬† @SuppressWarnings(&#34;Duplicates&#34;)  
</span></span><span class="line"><span class="cl">104: ¬† ¬† private void handleWritableKey(SelectionKey key) throws ClosedChannelException {  
</span></span><span class="line"><span class="cl">105: ¬† ¬† ¬† ¬† // Client Socket Channel  
</span></span><span class="line"><span class="cl">106: ¬† ¬† ¬† ¬† SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
</span></span><span class="line"><span class="cl">107:   
</span></span><span class="line"><span class="cl">108: ¬† ¬† ¬† ¬† // ÈÅçÂéÜÂìçÂ∫îÈòüÂàó  
</span></span><span class="line"><span class="cl">109: ¬† ¬† ¬† ¬† List&lt;String&gt; responseQueue = (ArrayList&lt;String&gt;) key.attachment();  
</span></span><span class="line"><span class="cl">110: ¬† ¬† ¬† ¬† for (String content : responseQueue) {  
</span></span><span class="line"><span class="cl">111: ¬† ¬† ¬† ¬† ¬† ¬† // ÊâìÂç∞Êï∞ÊçÆ  
</span></span><span class="line"><span class="cl">112: ¬† ¬† ¬† ¬† ¬† ¬† System.out.println(&#34;ÂÜôÂÖ•Êï∞ÊçÆÔºö&#34; \+ content);  
</span></span><span class="line"><span class="cl">113: ¬† ¬† ¬† ¬† ¬† ¬† // ËøîÂõû  
</span></span><span class="line"><span class="cl">114: ¬† ¬† ¬† ¬† ¬† ¬† CodecUtil.write(clientSocketChannel, content);  
</span></span><span class="line"><span class="cl">115: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl">116: ¬† ¬† ¬† ¬† responseQueue.clear();  
</span></span><span class="line"><span class="cl">117:   
</span></span><span class="line"><span class="cl">118: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Client Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl">119: ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_READ, responseQueue);  
</span></span><span class="line"><span class="cl">120: ¬† ¬† }  
</span></span><span class="line"><span class="cl">121:   
</span></span><span class="line"><span class="cl">122: ¬† ¬† public synchronized void send(String content) throws ClosedChannelException {  
</span></span><span class="line"><span class="cl">123: ¬† ¬† ¬† ¬† // Ê∑ªÂä†Âà∞ÂìçÂ∫îÈòüÂàó  
</span></span><span class="line"><span class="cl">124: ¬† ¬† ¬† ¬† responseQueue.add(content);  
</span></span><span class="line"><span class="cl">125: ¬† ¬† ¬† ¬† // ÊâìÂç∞Êï∞ÊçÆ  
</span></span><span class="line"><span class="cl">126: ¬† ¬† ¬† ¬† System.out.println(&#34;ÂÜôÂÖ•Êï∞ÊçÆÔºö&#34; \+ content);  
</span></span><span class="line"><span class="cl">127: ¬† ¬† ¬† ¬† // Ê≥®ÂÜå Client Socket Channel Âà∞ Selector  
</span></span><span class="line"><span class="cl">128: ¬† ¬† ¬† ¬† clientSocketChannel.register(selector, SelectionKey.OP_WRITE, responseQueue);  
</span></span><span class="line"><span class="cl">129: ¬† ¬† ¬† ¬† selector.wakeup();  
</span></span><span class="line"><span class="cl">130: ¬† ¬† }  
</span></span><span class="line"><span class="cl">131:   
</span></span><span class="line"><span class="cl">132: ¬† ¬† public static void main(String\[\] args) throws IOException, InterruptedException {  
</span></span><span class="line"><span class="cl">133: ¬† ¬† ¬† ¬† NioClient client = new NioClient();  
</span></span><span class="line"><span class="cl">134: ¬† ¬† ¬† ¬† for (int i = 0; i &lt; 30; i++) {  
</span></span><span class="line"><span class="cl">135: ¬† ¬† ¬† ¬† ¬† ¬† client.send(&#34;nihao: &#34; \+ i);  
</span></span><span class="line"><span class="cl">136: ¬† ¬† ¬† ¬† ¬† ¬† Thread.sleep(1000L);  
</span></span><span class="line"><span class="cl">137: ¬† ¬† ¬† ¬† }  
</span></span><span class="line"><span class="cl">138: ¬† ¬† }  
</span></span><span class="line"><span class="cl">139:   
</span></span><span class="line"><span class="cl">140: }  
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êï¥Âùó‰ª£Á†ÅÊàë‰ª¨ÂèØ‰ª•ÂàÜÊàê 3 ÈÉ®ÂàÜÔºö</p>
<ul>
<li>
<p>ÊûÑÈÄ†ÊñπÊ≥ïÔºöÂàùÂßãÂåñ NIO ÂÆ¢Êà∑Á´Ø„ÄÇ</p>
</li>
<li>
<p><code>#handleKeys()</code>¬†ÊñπÊ≥ïÔºöÂü∫‰∫é Selector Â§ÑÁêÜ IO Êìç‰Ωú„ÄÇ</p>
</li>
<li>
<p><code>#main(String[] args)</code>¬†ÊñπÊ≥ïÔºöÂàõÂª∫ NIO ÂÆ¢Êà∑Á´ØÔºåÂπ∂ÂêëÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±ÇÊï∞ÊçÆ„ÄÇ</p>
</li>
</ul>
<p>‰∏ãÈù¢ÔºåÊàë‰ª¨ÈÄêÂ∞èËäÇÊù•ÂàÜ‰∫´„ÄÇ</p>
<h2 id="httpsvipiocodercnnettynio-5-demo3-1-e69e84e980a0e696b9e6b395-31-ÊûÑÈÄ†ÊñπÊ≥ï31-ÊûÑÈÄ†ÊñπÊ≥ï"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-1-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"  title="3.1 ÊûÑÈÄ†ÊñπÊ≥ï"
     target="_blank" rel="noopener"
    ></a>3.1 ÊûÑÈÄ†ÊñπÊ≥ï</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 3 Ëá≥ 36 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p><code>clientSocketChannel</code>¬†Â±ûÊÄßÔºåÂÆ¢Êà∑Á´ØÁöÑ SocketChannel ÔºåÂú®„ÄêÁ¨¨ 9 Ëá≥ 13 Ë°å„ÄëÂíå„ÄêÁ¨¨ 19 Ë°å„ÄëÁöÑ‰ª£Á†ÅËøõË°åÂàùÂßãÂåñÔºåÈáçÁÇπÊòØÊ≠§Â§ÑËøûÊé•‰∫ÜÊåáÂÆöÊúçÂä°Á´Ø„ÄÇ</p>
</li>
<li>
<p><code>selector</code>¬†Â±ûÊÄßÔºåÈÄâÊã©Âô®ÔºåÂú®„ÄêÁ¨¨ 14 Ëá≥ 17 Ë°å„ÄëÁöÑ‰ª£Á†ÅËøõË°åÂàùÂßãÂåñÔºåÈáçÁÇπÊòØÊ≠§Â§ÑÂ∞Ü¬†<code>clientSocketChannel</code>¬†Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_CONNECT</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇËøôÊ†∑Â≠êÔºåÂú®ÂÆ¢Êà∑Á´ØËøûÊé•ÊúçÂä°Á´Ø<strong>ÊàêÂäü</strong>Êó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Â§ÑÁêÜËØ• IO ‰∫ã‰ª∂„ÄÇ</p>
</li>
<li>
<p><code>responseQueue</code>¬†Â±ûÊÄßÔºåÁõ¥Êé•Â£∞Êòé‰∏∫ NioClient ÁöÑÊàêÂëòÂèòÈáèÔºåÊòØ‰∏∫‰∫ÜÊñπ‰æø¬†<code>#send(String content)</code>¬†ÊñπÊ≥ïÁöÑÂÆûÁé∞„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 21 Ëá≥ 30 Ë°åÔºöË∞ÉÁî®¬†<code>#handleKeys()</code>¬†ÊñπÊ≥ïÔºåÂü∫‰∫é Selector Â§ÑÁêÜ IO ‰∫ã‰ª∂„ÄÇÊØîËæÉÁâπÊÆäÁöÑÊòØÔºåÊàë‰ª¨ÊòØÂêØÂä®‰∫Ü‰∏Ä‰∏™<strong>Á∫øÁ®ã</strong>ËøõË°åÂ§ÑÁêÜ„ÄÇÂõ†‰∏∫Âú®ÂêéÁª≠ÁöÑ¬†<code>#main()</code>¬†ÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÈúÄË¶ÅË∞ÉÁî®ÂèëÈÄÅËØ∑Ê±ÇÊï∞ÊçÆÁöÑÊñπÊ≥ïÔºå‰∏çËÉΩÁõ¥Êé•Âú®<strong>‰∏ªÁ∫øÁ®ã</strong>ÔºåËΩÆËØ¢Â§ÑÁêÜ IO ‰∫ã‰ª∂„ÄÇüòà Êú∫Êô∫ÁöÑËÉñÂèãÔºåÂèØËÉΩÂ∑≤ÁªèÂèëÁé∞ÔºåNioServer ‰∏•Ê†ºÊù•ËØ¥Ôºå‰πüÊòØÂ∫îËØ•ËøôÊ†∑Â§ÑÁêÜ„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 32 Ëá≥ 34 Ë°åÔºöÈÄöËøá CountDownLatch Êù•ÂÆûÁé∞ÈòªÂ°ûÁ≠âÂæÖÂÆ¢Êà∑Á´ØÊàêÂäüËøûÊé•‰∏äÊúçÂä°Á´Ø„ÄÇÂÖ∑‰ΩìÁöÑ¬†<code>CountDownLatch#countDown()</code>¬†ÊñπÊ≥ïÔºåÂú®¬†<code>#handleConnectableKey(SelectionKey key)</code>¬†ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®„ÄÇÂΩìÁÑ∂ÔºåÈô§‰∫ÜÂèØ‰ª•‰ΩøÁî® CountDownLatch Êù•ÂÆûÁé∞ÈòªÂ°ûÁ≠âÂæÖÔºåËøòÂèØ‰ª•ÈÄöËøáÂ¶Ç‰∏ãÊñπÂºè:</p>
</li>
<li>
<p>Object ÁöÑ wait Âíå notify ÁöÑÊñπÂºè„ÄÇ</p>
</li>
<li>
<p>Lock ÁöÑ await Âíå notify ÁöÑÊñπÂºè„ÄÇ</p>
</li>
<li>
<p>Queue ÁöÑÈòªÂ°ûÁ≠âÂæÖÊñπÂºè„ÄÇ</p>
</li>
<li>
<p>üòà ÂºÄÂøÉÂ∞±Â•ΩÔºåÁöÆ‰∏Ä‰∏ãÂæàÂºÄÂøÉ„ÄÇ</p>
</li>
</ul>
<h2 id="httpsvipiocodercnnettynio-5-demo3-2-handlekeys-32-handlekeys32-handlekeys"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-2-handleKeys"  title="3.2 handleKeys"
     target="_blank" rel="noopener"
    ></a>3.2 handleKeys</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 38 Ëá≥ 59 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<p><strong>ÂÆåÂÖ®</strong>Âíå NioServer ‰∏≠ÁöÑËØ•ÊñπÊ≥ï‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÁúÅÁï•„ÄÇ</p>
<h3 id="httpsvipiocodercnnettynio-5-demo3-2-1-handlekey-321-handlekey321-handlekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-2-1-handleKey"  title="3.2.1 handleKey"
     target="_blank" rel="noopener"
    ></a>3.2.1 handleKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 61 Ëá≥ 74 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<p><strong>Â§ß‰Ωì</strong>ÈÄªËæëÂíå NioServer ‰∏≠ÁöÑËØ•ÊñπÊ≥ï‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÂ∑ÆÂà´Â∞ÜÂØπ¬†<code>SelectionKey.OP_WRITE</code>¬†‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜÊîπÊàêÂØπ¬†<code>SelectionKey.OP_CONNECT</code>¬†‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜ„ÄÇ</p>
<h3 id="httpsvipiocodercnnettynio-5-demo3-3-2-handleconnectablekey-332-handleconnectablekey332-handleconnectablekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-2-handleConnectableKey"  title="3.3.2 handleConnectableKey"
     target="_blank" rel="noopener"
    ></a>3.3.2 handleConnectableKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 76 Ëá≥ 88 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>Á¨¨ 77 Ëá≥ 81 Ë°åÔºöÂà§Êñ≠ÂÆ¢Êà∑Á´ØÁöÑ SocketChannel ‰∏äÊòØÂê¶<strong>Ê≠£Âú®ËøõË°åËøûÊé•</strong>ÁöÑÊìç‰ΩúÔºåËã•ÊòØÔºåÂàôÂÆåÊàêËøûÊé•„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 83 Ë°åÔºöÊâìÂç∞Êó•Âøó„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 85 Ë°åÔºöÊ≥®ÂÜåÂÆ¢Êà∑Á´ØÁöÑ SocketChannel Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_READ</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇËøôÊ†∑Â≠êÔºåÂú®ÂÆ¢Êà∑Á´ØÊé•Êî∂Âà∞Âà∞ÊúçÂä°Á´ØÁöÑÊ∂àÊÅØ( Êï∞ÊçÆ )Êó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Â§ÑÁêÜËØ• IO ‰∫ã‰ª∂„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 87 Ë°åÔºöË∞ÉÁî®¬†<code>CountDownLatch#countDown()</code>¬†ÊñπÊ≥ïÔºåÁªìÊùü NioClient ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÁöÑ„ÄêÁ¨¨ 32 Ëá≥ 34 Ë°å„ÄëÁöÑÈòªÂ°ûÁ≠âÂæÖËøûÊé•ÂÆåÊàê„ÄÇ</p>
</li>
</ul>
<h3 id="httpsvipiocodercnnettynio-5-demo3-3-3-handlereadablekey-333-handlereadablekey333-handlereadablekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-3-handleReadableKey"  title="3.3.3 handleReadableKey"
     target="_blank" rel="noopener"
    ></a>3.3.3 handleReadableKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 91 Ëá≥ 101 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<p><strong>Â§ß‰Ωì</strong>ÈÄªËæëÂíå NioServer ‰∏≠ÁöÑËØ•ÊñπÊ≥ï‰∏ÄÊ®°‰∏ÄÊ†∑Ôºå<strong>ÂéªÊéâÂìçÂ∫îËØ∑Ê±ÇÁöÑÁõ∏ÂÖ≥ÈÄªËæë</strong>„ÄÇüòà Â¶ÇÊûú‰∏çÂéªÊéâÔºåÂ∞±ÊòØÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´Ø‰∫íÂèëÊ∂àÊÅØÁöÑ‚ÄúÊ≠ªÂæ™ÁéØ‚Äù‰∫Ü„ÄÇ</p>
<h3 id="httpsvipiocodercnnettynio-5-demo3-3-4-handlewritablekey-334-handlewritablekey334-handlewritablekey"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-4-handleWritableKey"  title="3.3.4 handleWritableKey"
     target="_blank" rel="noopener"
    ></a>3.3.4 handleWritableKey</h3>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 103 Ëá≥ 120 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<p><strong>ÂÆåÂÖ®</strong>Âíå NioServer ‰∏≠ÁöÑËØ•ÊñπÊ≥ï‰∏ÄÊ®°‰∏ÄÊ†∑„ÄÇ</p>
<h2 id="httpsvipiocodercnnettynio-5-demo3-3-send-33-send33-send"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-send"  title="3.3 send"
     target="_blank" rel="noopener"
    ></a>3.3 send</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 122 Ëá≥ 130 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<p>ÂÆ¢Êà∑Á´ØÂèëÈÄÅËØ∑Ê±ÇÊ∂àÊÅØÁªôÊúçÂä°Á´Ø„ÄÇ</p>
<ul>
<li>
<p>Á¨¨ 124 Ë°åÔºöÊ∑ªÂä†Âà∞ÂìçÂ∫îÈòüÂàó(¬†<code>responseQueue</code>¬†) ‰∏≠„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 126 Ë°åÔºöÊâìÂç∞Êó•Âøó„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 128 Ë°åÔºöÊ≥®ÂÜåÂÆ¢Êà∑Á´ØÁöÑ SocketChannel Âà∞¬†<code>selector</code>¬†‰∏≠ÔºåÂπ∂ÂØπ¬†<code>SelectionKey.OP_WRITE</code>¬†‰∫ã‰ª∂ÊÑüÂÖ¥Ë∂£„ÄÇÂÖ∑‰ΩìÁöÑÂéüÂõ†ÔºåÂíå NioServer ÁöÑ¬†<code>#handleReadableKey(SelectionKey key)</code>¬†ÊñπÊ≥ïÁöÑ„ÄêÁ¨¨ 88 Ë°å„Äë‰∏ÄÊ†∑„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 129 Ë°åÔºöË∞ÉÁî®¬†<code>Selector#wakeup()</code>¬†ÊñπÊ≥ïÔºåÂî§ÈÜí¬†<code>#handleKeys()</code>¬†ÊñπÊ≥ï‰∏≠Ôºå<code>Selector#select(long timeout)</code>¬†ÊñπÊ≥ïÁöÑÈòªÂ°ûÁ≠âÂæÖ„ÄÇ</p>
</li>
<li>
<p>Âõ†‰∏∫ÔºåÂú®¬†<code>Selector#select(long timeout)</code>¬†ÊñπÊ≥ïÁöÑÂÆûÁé∞‰∏≠ÔºåÊòØ‰ª•Ë∞ÉÁî®<strong>ÂΩìÊó∂</strong>ÔºåÂØπ SocketChannel ÁöÑÊÑüÂÖ¥Ë∂£ÁöÑ‰∫ã‰ª∂ „ÄÇ</p>
</li>
<li>
<p>ÊâÄ‰ª•ÔºåÂú®„ÄêÁ¨¨ 128 Ë°å„ÄëÁöÑ‰ª£Á†Å‰∏≠ÔºåÂç≥‰Ωø‰øÆÊîπ‰∫ÜÂØπ SocketChannel ÁöÑÊÑüÂÖ¥Ë∂£ÁöÑ‰∫ã‰ª∂Ôºå‰πü‰∏ç‰ºöÁªìÊùü¬†<code>Selector#select(long timeout)</code>¬†ÊñπÊ≥ïÁöÑÈòªÂ°ûÁ≠âÂæÖ„ÄÇÂõ†Ê≠§ÔºåÈúÄË¶ÅËøõË°åÂî§ÈÜíÊìç‰Ωú„ÄÇ</p>
</li>
<li>
<p>üòà ÊÑüÂÖ¥Ë∂£ÁöÑËÉñÂèãÔºåÂèØ‰ª•Â∞ÜËøôË°å‰ª£Á†ÅËøõË°åÊ≥®ÈáäÔºåÊµãËØï‰∏ãÊïàÊûúÂ∞±ÂæàÂÆπÊòìÊòéÁôΩ‰∫Ü„ÄÇ</p>
</li>
</ul>
<h2 id="httpsvipiocodercnnettynio-5-demo3-4-main-34-main34-main"><a class="link" href="http://svip.iocoder.cn/Netty/nio-5-demo/#3-4-main"  title="3.4 main"
     target="_blank" rel="noopener"
    ></a>3.4 main</h2>
<blockquote>
<p>ÂØπÂ∫î„ÄêÁ¨¨ 132 Ëá≥ 137 Ë°å„ÄëÁöÑ‰ª£Á†Å„ÄÇ</p>
</blockquote>
<ul>
<li>
<p>Á¨¨ 133 Ë°åÔºöÂàõÂª∫‰∏Ä‰∏™ NioClient ÂØπË±°„ÄÇ</p>
</li>
<li>
<p>Á¨¨ 134 Ëá≥ 137 Ë°åÔºöÊØèÁßíÂèëÈÄÅ‰∏ÄÊ¨°ËØ∑Ê±Ç„ÄÇËÄÉËôëÂà∞‰ª£Á†ÅÊ≤°ÊúâÂ§ÑÁêÜÊãÜÂåÖÁöÑÈÄªËæëÔºåÊâÄ‰ª•Â¢ûÂä†‰∫ÜÈó¥Èöî 1 ÁßíÁöÑ sleep „ÄÇ</p>
</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%80/">
        
        

        <div class="article-details">
            <h2 class="article-title">nettyÊ∫êÁ†ÅÂàÜÊûê‰∏Ä</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%89/">
        
        

        <div class="article-details">
            <h2 class="article-title">nettyÊ∫êÁ†ÅÂàÜÊûê‰∏â</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%8C/">
        
        

        <div class="article-details">
            <h2 class="article-title">nettyÊ∫êÁ†ÅÂàÜÊûê‰∫å</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%9B%9B/">
        
        

        <div class="article-details">
            <h2 class="article-title">nettyÊ∫êÁ†ÅÂàÜÊûêÂõõ</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/myblog/p/netty%E9%9D%A2%E8%AF%95%E9%A2%98/">
        
        

        <div class="article-details">
            <h2 class="article-title">nettyÈù¢ËØïÈ¢ò</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/"],"locale":{"admin":"üëªÂ±ëÂçö‰∏ª","placeholder":"üéâÁïô‰∏ã‰Ω†ÁöÑËÑöÂç∞."},"requiredMeta":["name","email"]});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 TauZZ&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/myblog/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
